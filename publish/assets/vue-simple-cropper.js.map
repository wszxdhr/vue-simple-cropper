{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///vue-simple-cropper.js","webpack:///webpack/bootstrap 03cb3092d301a8718223","webpack:///./example/src/index.vue?cef2","webpack:///./example/src/index.js","webpack:///./example/src/makeImage.js","webpack:///./example/src/marquee.js","webpack:///./example/src/rotateCompute.js","webpack:///index.vue","webpack:///./~/.npminstall/vue-loader/13.0.5/vue-loader/lib/component-normalizer.js","webpack:///./example/src/index.vue?0312"],"names":["root","factory","exports","module","define","amd","this","modules","__webpack_require__","moduleId","installedModules","i","l","call","m","c","value","d","name","getter","o","Object","defineProperty","configurable","enumerable","get","n","__esModule","object","property","prototype","hasOwnProperty","p","s","__webpack_exports__","injectStyle","ssrContext","__WEBPACK_IMPORTED_MODULE_0__babel_loader_node_modules_npminstall_vue_loader_13_0_5_vue_loader_lib_selector_type_script_index_0_index_vue__","__WEBPACK_IMPORTED_MODULE_1__node_modules_npminstall_vue_loader_13_0_5_vue_loader_lib_template_compiler_index_id_data_v_1e4f7b1a_hasScoped_false_transformToRequire_video_src_source_src_img_src_image_xlink_href_node_modules_npminstall_vue_loader_13_0_5_vue_loader_lib_selector_type_template_index_0_index_vue__","normalizeComponent","__vue_styles__","Component","__WEBPACK_IMPORTED_MODULE_0__index_vue__","_ref","image","width","height","left","top","iWidth","iHeight","rotate","type","callback","img","Image","setAttribute","canvas","document","createElement","ctx","getContext","save","onload","translate","Math","PI","drawImage","restore","toDataURL","src","right","bottom","parent","ratioLocked","changeLeft","val","_left","rect","getBoundingClientRect","thisWidth","thisHeight","changeRight","changeBottom","changeTop","setRatioLocked","option","w","h","ratio","setRect","undefined","outerHeight","outerWidth","innerHeight","innerWidth","isVertical","offsetX","offsetY","oWidth","oHeight","innerRatio","outerRatio","__WEBPACK_IMPORTED_MODULE_0__marquee__","__WEBPACK_IMPORTED_MODULE_1__rotateCompute__","__WEBPACK_IMPORTED_MODULE_2__makeImage__","props","String","default","infoBase","Number","created","marquee","$refs","cropper","mounted","console","dir","imageChanged","data","imageInfo","x","y","naturalWidth","naturalHeight","touchInfo","x1","x2","y1","y2","dotIndex","marqueeOld","isMoving","methods","onMarqueeMouseDown","evt","log","clientX","clientY","body","addEventListener","onMarqueeMouseMove","onMarqueeMouseUp","cropperRect","protoWidth","protoHeight","computeInfo","removeEventListener","onMarqueeDotMouseDown","idx","onMarqueeDotMouseMove","onMarqueeDotMouseUp","_this","ratioX","spec","ratioY","arg","arguments","length","setImage","clientWidth","clientHeight","_rotateCompute","marqueeTop","marqueeLeft","marqueeBottom","marqueeRight","marqueeWidth","marqueeHeight","centerX","halfWidth","centerY","halfHeight","_this2","_this3","result","computeImage","computeMarquee","$emit","getImage","watch","rawScriptExports","compiledTemplate","injectStyles","scopeId","moduleIdentifier","esModule","scriptExports","options","render","staticRenderFns","_scopeId","hook","context","$vnode","__VUE_SSR_CONTEXT__","_registeredComponents","add","_ssrRegister","functional","existing","beforeCreate","concat","_vm","_h","$createElement","_c","_self","ref","staticClass","class","style","transform","attrs","alt","_v","on","mousedown","$event","_l","dot","esExports"],"mappings":"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","file":"vue-simple-cropper.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"VueSimpleCropper\"] = factory();\n\telse\n\t\troot[\"VueSimpleCropper\"] = factory();\n})(this, function() {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition","(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"VueSimpleCropper\"] = factory();\n\telse\n\t\troot[\"VueSimpleCropper\"] = factory();\n})(this, function() {\nreturn /******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId]) {\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/ \t\t}\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\ti: moduleId,\n/******/ \t\t\tl: false,\n/******/ \t\t\texports: {}\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.l = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// identity function for calling harmony imports with the correct context\n/******/ \t__webpack_require__.i = function(value) { return value; };\n/******/\n/******/ \t// define getter function for harmony exports\n/******/ \t__webpack_require__.d = function(exports, name, getter) {\n/******/ \t\tif(!__webpack_require__.o(exports, name)) {\n/******/ \t\t\tObject.defineProperty(exports, name, {\n/******/ \t\t\t\tconfigurable: false,\n/******/ \t\t\t\tenumerable: true,\n/******/ \t\t\t\tget: getter\n/******/ \t\t\t});\n/******/ \t\t}\n/******/ \t};\n/******/\n/******/ \t// getDefaultExport function for compatibility with non-harmony modules\n/******/ \t__webpack_require__.n = function(module) {\n/******/ \t\tvar getter = module && module.__esModule ?\n/******/ \t\t\tfunction getDefault() { return module['default']; } :\n/******/ \t\t\tfunction getModuleExports() { return module; };\n/******/ \t\t__webpack_require__.d(getter, 'a', getter);\n/******/ \t\treturn getter;\n/******/ \t};\n/******/\n/******/ \t// Object.prototype.hasOwnProperty.call\n/******/ \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"/\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(__webpack_require__.s = 1);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__babel_loader_node_modules_npminstall_vue_loader_13_0_5_vue_loader_lib_selector_type_script_index_0_index_vue__ = __webpack_require__(5);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__node_modules_npminstall_vue_loader_13_0_5_vue_loader_lib_template_compiler_index_id_data_v_1e4f7b1a_hasScoped_false_transformToRequire_video_src_source_src_img_src_image_xlink_href_node_modules_npminstall_vue_loader_13_0_5_vue_loader_lib_selector_type_template_index_0_index_vue__ = __webpack_require__(8);\nfunction injectStyle (ssrContext) {\n  __webpack_require__(6)\n}\nvar normalizeComponent = __webpack_require__(7)\n/* script */\n\n/* template */\n\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __WEBPACK_IMPORTED_MODULE_0__babel_loader_node_modules_npminstall_vue_loader_13_0_5_vue_loader_lib_selector_type_script_index_0_index_vue__[\"a\" /* default */],\n  __WEBPACK_IMPORTED_MODULE_1__node_modules_npminstall_vue_loader_13_0_5_vue_loader_lib_template_compiler_index_id_data_v_1e4f7b1a_hasScoped_false_transformToRequire_video_src_source_src_img_src_image_xlink_href_node_modules_npminstall_vue_loader_13_0_5_vue_loader_lib_selector_type_template_index_0_index_vue__[\"a\" /* default */],\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (Component.exports);\n\n\n/***/ }),\n/* 1 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__index_vue__ = __webpack_require__(0);\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (__WEBPACK_IMPORTED_MODULE_0__index_vue__[\"a\" /* default */]);\n\n/***/ }),\n/* 2 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony default export */ __webpack_exports__[\"a\"] = (function (_ref) {\n  var image = _ref.image,\n      width = _ref.width,\n      height = _ref.height,\n      left = _ref.left,\n      top = _ref.top,\n      iWidth = _ref.iWidth,\n      iHeight = _ref.iHeight,\n      rotate = _ref.rotate,\n      type = _ref.type,\n      callback = _ref.callback;\n\n  var img = new Image();\n  img.setAttribute('crossOrigin', 'anonymous');\n  var canvas = document.createElement('canvas');\n  canvas.width = width;\n  canvas.height = height;\n  var ctx = null;\n  ctx = canvas.getContext('2d');\n  ctx.save();\n  img.onload = function () {\n    ctx.translate(left + iWidth / 2, top + iHeight / 2);\n    ctx.rotate(rotate * Math.PI / 180);\n    ctx.translate(-(left + iWidth / 2), -(top + iHeight / 2));\n    ctx.drawImage(img, left, top, iWidth, iHeight);\n    ctx.restore();\n    callback(canvas.toDataURL(type || 'image/png'));\n  };\n  img.src = image.src;\n});\n\n/***/ }),\n/* 3 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony default export */ __webpack_exports__[\"a\"] = ({\n  left: 0,\n  right: 0,\n  bottom: 100,\n  top: 100,\n  parent: null,\n  ratioLocked: false,\n  changeLeft: function changeLeft(val) {\n    var _left = val > 0 ? val : 0;\n    if (this.ratioLocked && this.parent) {\n      var rect = this.parent.getBoundingClientRect();\n      var thisWidth = rect.width - this.left - this.right;\n      var bottom = rect.height - this.top - thisWidth;\n      if (bottom < 0) {\n        bottom = 0;\n        var thisHeight = rect.height - this.top;\n        _left = rect.width - thisHeight - this.right;\n      }\n      this.bottom = bottom;\n    }\n    this.left = _left;\n  },\n  changeRight: function changeRight(val) {\n    this.right = val;\n  },\n  changeBottom: function changeBottom(val) {\n    this.bottom = val;\n  },\n  changeTop: function changeTop(val) {\n    this.top = val;\n  },\n  setRatioLocked: function setRatioLocked(val, option) {\n    this.ratioLocked = val;\n    if (val) {\n      var width = this.w;\n      var height = this.h;\n      var ratio = width / height;\n      if (option) {\n        if (option.ratio) {\n          ratio = option.ratio;\n        } else if (option.w && option.h) {\n          ratio = option.w / option.h;\n          width = option.w;\n          height = option.h;\n        }\n      }\n      this.w = width;\n      this.h = width / ratio;\n    }\n  },\n  setRect: function setRect(_ref) {\n    var left = _ref.left,\n        bottom = _ref.bottom,\n        right = _ref.right,\n        top = _ref.top;\n\n    if (left !== undefined && left !== null) {\n      this.left = left;\n    }\n    if (bottom !== undefined && bottom !== null) {\n      this.bottom = bottom;\n    }\n    if (right !== undefined && right !== null) {\n      this.right = right;\n    }\n    if (top !== undefined && top !== null) {\n      this.top = top;\n    }\n  }\n});\n\n/***/ }),\n/* 4 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony default export */ __webpack_exports__[\"a\"] = (function (_ref) {\n  var outerHeight = _ref.outerHeight,\n      outerWidth = _ref.outerWidth,\n      innerHeight = _ref.innerHeight,\n      innerWidth = _ref.innerWidth,\n      rotate = _ref.rotate,\n      offsetX = _ref.offsetX,\n      offsetY = _ref.offsetY;\n\n  var isVertical = rotate === 90 || rotate === 270;\n  var oWidth = isVertical ? outerHeight : outerWidth;\n  var oHeight = isVertical ? outerWidth : outerHeight;\n  var innerRatio = innerWidth / innerHeight;\n  var outerRatio = oWidth / oHeight;\n  var iWidth = 0;\n  var iHeight = 0;\n  if (innerRatio > outerRatio) {\n    iWidth = oWidth;\n    iHeight = iWidth / innerRatio;\n  } else {\n    iHeight = oHeight;\n    iWidth = iHeight * innerRatio;\n  }\n  // compute position\n  var left = (outerWidth - iWidth) / 2;\n  var top = (outerHeight - iHeight) / 2;\n  return { height: iHeight, width: iWidth, top: top, left: left };\n});\n\n/***/ }),\n/* 5 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__marquee__ = __webpack_require__(3);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__rotateCompute__ = __webpack_require__(4);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__makeImage__ = __webpack_require__(2);\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\n\n\n\n/* harmony default export */ __webpack_exports__[\"a\"] = ({\n  props: {\n    image: {\n      type: String,\n      default: ''\n    },\n    infoBase: { // marquee or image or both\n      type: String,\n      default: 'marquee'\n    },\n    ratio: { // w/h of marquee\n      type: Number,\n      default: 0\n    },\n    rotate: {\n      type: Number,\n      default: 0\n    }\n  },\n  created: function created() {\n    this.marquee.parent = this.$refs.cropper;\n  },\n  mounted: function mounted() {\n    console.dir(this.$refs.cropper);\n    this.imageChanged();\n  },\n  data: function data() {\n    return {\n      marquee: __WEBPACK_IMPORTED_MODULE_0__marquee__[\"a\" /* default */],\n      imageInfo: {\n        x: 0,\n        y: 0,\n        w: 100,\n        h: 100,\n        naturalWidth: 0,\n        naturalHeight: 0\n      },\n      touchInfo: {\n        x1: 0,\n        x2: 0,\n        y1: 0,\n        y2: 0,\n        dotIndex: 0,\n        marqueeOld: {\n          left: 0,\n          right: 0,\n          bottom: 0,\n          top: 0\n        },\n        isMoving: false\n      }\n    };\n  },\n\n  methods: {\n    onMarqueeMouseDown: function onMarqueeMouseDown(evt) {\n      console.log('down');\n      console.dir(evt);\n      this.touchInfo.x1 = evt.clientX;\n      this.touchInfo.y1 = evt.clientY;\n      this.touchInfo.marqueeOld.left = this.marquee.left;\n      this.touchInfo.marqueeOld.bottom = this.marquee.bottom;\n      this.touchInfo.marqueeOld.right = this.marquee.right;\n      this.touchInfo.marqueeOld.top = this.marquee.top;\n      this.touchInfo.isMoving = true;\n      document.body.addEventListener('mousemove', this.onMarqueeMouseMove);\n      document.body.addEventListener('mouseup', this.onMarqueeMouseUp);\n    },\n    onMarqueeMouseMove: function onMarqueeMouseMove(evt) {\n      this.touchInfo.x2 = evt.clientX;\n      this.touchInfo.y2 = evt.clientY;\n      var cropperRect = this.$refs.cropper.getBoundingClientRect();\n      var protoWidth = cropperRect.width - this.touchInfo.marqueeOld.left - this.touchInfo.marqueeOld.right;\n      var protoHeight = cropperRect.height - this.touchInfo.marqueeOld.top - this.touchInfo.marqueeOld.bottom;\n      var left = this.touchInfo.marqueeOld.left + this.touchInfo.x2 - this.touchInfo.x1;\n      var right = this.touchInfo.marqueeOld.right - (this.touchInfo.x2 - this.touchInfo.x1);\n      var top = this.touchInfo.marqueeOld.top + this.touchInfo.y2 - this.touchInfo.y1;\n      var bottom = this.touchInfo.marqueeOld.bottom - (this.touchInfo.y2 - this.touchInfo.y1);\n      if (left <= 0) {\n        left = 0;\n        right = cropperRect.width - protoWidth;\n      } else if (right <= 0) {\n        right = 0;\n        left = cropperRect.width - protoWidth;\n      }\n      if (top <= 0) {\n        top = 0;\n        bottom = cropperRect.height - protoHeight;\n      } else if (bottom <= 0) {\n        bottom = 0;\n        top = cropperRect.height - protoHeight;\n      }\n      //        console.log(left, right, top, bottom)\n      //        this.marquee.changeBottom(bottom)\n      //        this.marquee.changeTop(top)\n      this.marquee.setRect({ left: left, right: right, top: top, bottom: bottom });\n      this.computeInfo();\n    },\n    onMarqueeMouseUp: function onMarqueeMouseUp(evt) {\n      this.touchInfo.isMoving = false;\n      document.body.removeEventListener('mousemove', this.onMarqueeMouseMove);\n      document.body.removeEventListener('mouseup', this.onMarqueeMouseUp);\n    },\n    onMarqueeDotMouseDown: function onMarqueeDotMouseDown(evt, idx) {\n      this.touchInfo.x1 = evt.clientX;\n      this.touchInfo.y1 = evt.clientY;\n      this.touchInfo.marqueeOld.left = this.marquee.left;\n      this.touchInfo.marqueeOld.bottom = this.marquee.bottom;\n      this.touchInfo.marqueeOld.right = this.marquee.right;\n      this.touchInfo.marqueeOld.top = this.marquee.top;\n      this.touchInfo.isMoving = true;\n      this.touchInfo.dotIndex = idx;\n      document.body.addEventListener('mousemove', this.onMarqueeDotMouseMove);\n      document.body.addEventListener('mouseup', this.onMarqueeDotMouseUp);\n    },\n    onMarqueeDotMouseMove: function onMarqueeDotMouseMove(evt) {\n      var _this = this;\n\n      this.touchInfo.x2 = evt.clientX;\n      this.touchInfo.y2 = evt.clientY;\n      var cropperRect = this.$refs.cropper.getBoundingClientRect();\n      var x = this.touchInfo.x2 - this.touchInfo.x1;\n      var y = this.touchInfo.y2 - this.touchInfo.y1;\n      var top = this.touchInfo.marqueeOld.top;\n      var bottom = this.touchInfo.marqueeOld.bottom;\n      var left = this.touchInfo.marqueeOld.left;\n      var right = this.touchInfo.marqueeOld.right;\n      //        console.log(x, y)\n      var ratioX = function ratioX(spec) {\n        if (_this.ratio) {\n          // w / h\n          x = y * _this.ratio;\n        } else if (spec) {\n          x = 0;\n        }\n      };\n      var ratioY = function ratioY(spec) {\n        if (_this.ratio) {\n          y = x / _this.ratio;\n        } else if (spec) {\n          y = 0;\n        }\n      };\n      var changeTop = function changeTop() {\n        var arg = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : y;\n\n        top = _this.touchInfo.marqueeOld.top + arg;\n      };\n      var changeLeft = function changeLeft() {\n        var arg = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : x;\n\n        left = _this.touchInfo.marqueeOld.left + arg;\n      };\n      var changeBottom = function changeBottom() {\n        var arg = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : y;\n\n        bottom = _this.touchInfo.marqueeOld.bottom + arg;\n      };\n      var changeRight = function changeRight() {\n        var arg = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : x;\n\n        right = _this.touchInfo.marqueeOld.right + arg;\n      };\n      //        let cropperRect = this.$refs.cropper.getBoundingClientRect()\n      switch (this.touchInfo.dotIndex) {\n        case 1:\n          ratioX();changeTop();changeLeft();break;\n        case 2:\n          ratioX(true);changeTop();changeRight();break;\n        case 3:\n          ratioX();changeTop();changeRight();break;\n        case 4:\n          ratioY(true);changeLeft();changeBottom();break;\n        case 5:\n          ratioY(true);changeRight(-x);changeBottom(-y);break;\n        case 6:\n          ratioX();changeBottom(-y);changeLeft(-x);break;\n        case 7:\n          ratioX(true);changeBottom(-y);changeRight(-x);break;\n        case 8:\n          ratioX();changeRight(-x);changeBottom(-y);break;\n      }\n      if (top <= 0) {\n        top = 0;\n        if (this.ratio) {\n          console.log((cropperRect.height - bottom) * this.ratio);\n          if (left === this.marquee.left) {\n            right = cropperRect.width - (cropperRect.height - bottom) * this.ratio - left;\n          } else {\n            left = cropperRect.width - (cropperRect.height - bottom) * this.ratio - right;\n          }\n        }\n      }\n      if (bottom <= 0) {\n        bottom = 0;\n        if (this.ratio) {\n          if (left === this.marquee.left) {\n            right = cropperRect.width - (cropperRect.height - top) * this.ratio - left;\n          } else {\n            left = cropperRect.width - (cropperRect.height - top) * this.ratio - right;\n          }\n        }\n      }\n      if (left <= 0) {\n        left = 0;\n        if (this.ratio) {\n          if (top === this.marquee.top) {\n            bottom = cropperRect.height - (cropperRect.width - right) / this.ratio - top;\n          } else {\n            top = cropperRect.height - (cropperRect.width - right) / this.ratio - bottom;\n          }\n        }\n      }\n      if (right <= 0) {\n        right = 0;\n        if (this.ratio) {\n          if (top === this.marquee.top) {\n            bottom = cropperRect.height - (cropperRect.width - left) / this.ratio - top;\n          } else {\n            top = cropperRect.height - (cropperRect.width - left) / this.ratio - bottom;\n          }\n        }\n      }\n      this.marquee.setRect({ left: left, right: right, top: top, bottom: bottom });\n      this.computeInfo();\n    },\n    onMarqueeDotMouseUp: function onMarqueeDotMouseUp(evt) {\n      this.touchInfo.isMoving = false;\n      document.body.removeEventListener('mousemove', this.onMarqueeDotMouseMove);\n      document.body.removeEventListener('mouseup', this.onMarqueeDotMouseUp);\n    },\n    setImage: function setImage() {\n      // get natural width and height\n      this.imageInfo.naturalWidth = this.$refs['cropper-image'].naturalWidth;\n      this.imageInfo.naturalHeight = this.$refs['cropper-image'].naturalHeight;\n      // set image infos\n      // set width and height\n      var outerWidth = this.$refs.cropper.clientWidth;\n      var outerHeight = this.$refs.cropper.clientHeight;\n\n      var _rotateCompute = __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1__rotateCompute__[\"a\" /* default */])({\n        outerHeight: outerHeight,\n        outerWidth: outerWidth,\n        innerHeight: this.imageInfo.naturalHeight,\n        innerWidth: this.imageInfo.naturalWidth,\n        rotate: this.rotate\n      }),\n          left = _rotateCompute.left,\n          top = _rotateCompute.top,\n          width = _rotateCompute.width,\n          height = _rotateCompute.height;\n\n      this.imageInfo.y = top;\n      this.imageInfo.x = left;\n      this.imageInfo.w = width;\n      this.imageInfo.h = height;\n      // set marquee infos\n      var marqueeTop = this.imageInfo.y;\n      var marqueeLeft = this.imageInfo.x;\n      var marqueeBottom = outerHeight - this.imageInfo.y - this.imageInfo.h;\n      var marqueeRight = outerWidth - this.imageInfo.x - this.imageInfo.w;\n      var marqueeWidth = this.imageInfo.w;\n      var marqueeHeight = this.imageInfo.h;\n      // ratio\n      if (this.ratio) {\n        if (marqueeWidth > marqueeHeight * this.ratio) {\n          // ho\n          var centerX = this.imageInfo.w / 2 + this.imageInfo.x;\n          var halfWidth = marqueeHeight * this.ratio / 2;\n          marqueeRight = marqueeLeft = centerX - halfWidth;\n          console.log(marqueeRight);\n        } else {\n          // v\n          var centerY = this.imageInfo.h / 2 + this.imageInfo.y;\n          var halfHeight = marqueeWidth / this.ratio / 2;\n          marqueeBottom = marqueeTop = centerY - halfHeight;\n        }\n      }\n      this.marquee.changeLeft(marqueeLeft);\n      this.marquee.changeTop(marqueeTop);\n      this.marquee.changeBottom(marqueeBottom);\n      this.marquee.changeRight(marqueeRight);\n      this.computeInfo();\n    },\n    imageChanged: function imageChanged() {\n      var _this2 = this;\n\n      this.$refs['cropper-image'].onload = function () {\n        _this2.setImage();\n      };\n    },\n    computeInfo: function computeInfo() {\n      var _this3 = this;\n\n      var cropperRect = this.$refs.cropper.getBoundingClientRect();\n      // TODO: scale\n      var result = {};\n      var computeImage = function computeImage() {\n        return { // rotate field is rotate of marquee\n          x: _this3.marquee.left - _this3.imageInfo.x,\n          y: _this3.marquee.top - _this3.imageInfo.y,\n          w: cropperRect.width - _this3.marquee.left - _this3.marquee.right,\n          h: cropperRect.height - _this3.marquee.top - _this3.marquee.bottom,\n          rotate: _this3.rotate + 'deg',\n          src: _this3.image\n        };\n      };\n      var computeMarquee = function computeMarquee() {\n        return { // x is position x of image, w is width of marquee, rotate is rotate of image(origin: center)\n          x: _this3.imageInfo.x - _this3.marquee.left,\n          y: _this3.imageInfo.y - _this3.marquee.top,\n          w: cropperRect.width - _this3.marquee.left - _this3.marquee.right,\n          h: cropperRect.height - _this3.marquee.top - _this3.marquee.bottom,\n          rotate: _this3.rotate + 'deg',\n          src: _this3.image,\n          image: {\n            w: _this3.imageInfo.w,\n            h: _this3.imageInfo.h,\n            // TODO: 支持rotate\n            rotate: '0deg'\n          }\n        };\n      };\n      if (this.infoBase === 'image') {\n        result = computeImage();\n      } else if (this.infoBase === 'marquee') {\n        result = computeMarquee();\n      } else if (this.infoBase === 'both') {\n        result = {\n          image: computeImage(),\n          marquee: computeMarquee()\n        };\n      }\n      this.$emit('changed', result);\n    },\n    getImage: function getImage(callback) {\n      var type = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 'image/png';\n\n      var cropperRect = this.$refs.cropper.getBoundingClientRect();\n      return __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_2__makeImage__[\"a\" /* default */])({\n        callback: callback,\n        rotate: this.rotate,\n        type: type,\n        width: cropperRect.width - this.marquee.left - this.marquee.right,\n        height: cropperRect.height - this.marquee.top - this.marquee.bottom,\n        left: this.imageInfo.x - this.marquee.left,\n        top: this.imageInfo.y - this.marquee.top,\n        iWidth: this.imageInfo.w,\n        iHeight: this.imageInfo.h,\n        image: this.$refs['cropper-image']\n      });\n    }\n  },\n  watch: {\n    image: function image(val) {\n      this.imageChanged();\n    },\n    rotate: function rotate() {\n      this.setImage();\n    }\n  }\n});\n\n/***/ }),\n/* 6 */\n/***/ (function(module, exports) {\n\n// removed by extract-text-webpack-plugin\n\n/***/ }),\n/* 7 */\n/***/ (function(module, exports) {\n\n/* globals __VUE_SSR_CONTEXT__ */\n\n// this module is a runtime utility for cleaner component module output and will\n// be included in the final webpack user bundle\n\nmodule.exports = function normalizeComponent (\n  rawScriptExports,\n  compiledTemplate,\n  injectStyles,\n  scopeId,\n  moduleIdentifier /* server only */\n) {\n  var esModule\n  var scriptExports = rawScriptExports = rawScriptExports || {}\n\n  // ES6 modules interop\n  var type = typeof rawScriptExports.default\n  if (type === 'object' || type === 'function') {\n    esModule = rawScriptExports\n    scriptExports = rawScriptExports.default\n  }\n\n  // Vue.extend constructor export interop\n  var options = typeof scriptExports === 'function'\n    ? scriptExports.options\n    : scriptExports\n\n  // render functions\n  if (compiledTemplate) {\n    options.render = compiledTemplate.render\n    options.staticRenderFns = compiledTemplate.staticRenderFns\n  }\n\n  // scopedId\n  if (scopeId) {\n    options._scopeId = scopeId\n  }\n\n  var hook\n  if (moduleIdentifier) { // server build\n    hook = function (context) {\n      // 2.3 injection\n      context =\n        context || // cached call\n        (this.$vnode && this.$vnode.ssrContext) || // stateful\n        (this.parent && this.parent.$vnode && this.parent.$vnode.ssrContext) // functional\n      // 2.2 with runInNewContext: true\n      if (!context && typeof __VUE_SSR_CONTEXT__ !== 'undefined') {\n        context = __VUE_SSR_CONTEXT__\n      }\n      // inject component styles\n      if (injectStyles) {\n        injectStyles.call(this, context)\n      }\n      // register component module identifier for async chunk inferrence\n      if (context && context._registeredComponents) {\n        context._registeredComponents.add(moduleIdentifier)\n      }\n    }\n    // used by ssr in case component is cached and beforeCreate\n    // never gets called\n    options._ssrRegister = hook\n  } else if (injectStyles) {\n    hook = injectStyles\n  }\n\n  if (hook) {\n    var functional = options.functional\n    var existing = functional\n      ? options.render\n      : options.beforeCreate\n    if (!functional) {\n      // inject component registration as beforeCreate hook\n      options.beforeCreate = existing\n        ? [].concat(existing, hook)\n        : [hook]\n    } else {\n      // register for functioal component in vue file\n      options.render = function renderWithStyleInjection (h, context) {\n        hook.call(context)\n        return existing(h, context)\n      }\n    }\n  }\n\n  return {\n    esModule: esModule,\n    exports: scriptExports,\n    options: options\n  }\n}\n\n\n/***/ }),\n/* 8 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nvar render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{ref:\"cropper\",staticClass:\"vue-simple-cropper\"},[_c('img',{ref:\"cropper-image\",class:['vue-simple-cropper-image'],style:({width: _vm.imageInfo.w + 'px',\n               height: _vm.imageInfo.h + 'px',\n               top: _vm.imageInfo.y + 'px',\n               left: _vm.imageInfo.x + 'px',\n               transform: 'rotate(' + _vm.rotate + 'deg)'}),attrs:{\"src\":_vm.image,\"alt\":\"\"}}),_vm._v(\" \"),_c('div',{staticClass:\"vue-simple-cropper-marquee\",style:({right: _vm.marquee.right + 'px',\n                bottom: _vm.marquee.bottom + 'px',\n                top: _vm.marquee.top + 'px',\n                left: _vm.marquee.left + 'px'})},[_c('div',{staticClass:\"vue-simple-cropper-marque-wrap\"},[_c('div',{staticClass:\"vue-simple-cropper-marque-mask\",on:{\"mousedown\":function($event){_vm.onMarqueeMouseDown($event)}}}),_vm._v(\" \"),_vm._l((8),function(dot){return _c('div',{class:['vue-simple-cropper-marque-dot', 'dot' + dot],on:{\"mousedown\":function($event){_vm.onMarqueeDotMouseDown($event, dot)}}})})],2)])])}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\n/* harmony default export */ __webpack_exports__[\"a\"] = (esExports);\n\n/***/ })\n/******/ ]);\n});\n\n\n// WEBPACK FOOTER //\n// vue-simple-cropper.js"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// identity function for calling harmony imports with the correct context\n \t__webpack_require__.i = function(value) { return value; };\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 1);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 03cb3092d301a8718223","function injectStyle (ssrContext) {\n  require(\"!!../../node_modules/.npminstall/extract-text-webpack-plugin/2.1.2/extract-text-webpack-plugin/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"minimize\\\":true,\\\"sourceMap\\\":true}!../../node_modules/.npminstall/vue-loader/13.0.5/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-1e4f7b1a\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!../../node_modules/.npminstall/vue-loader/13.0.5/vue-loader/lib/selector?type=styles&index=0!./index.vue\")\n}\nvar normalizeComponent = require(\"!../../node_modules/.npminstall/vue-loader/13.0.5/vue-loader/lib/component-normalizer\")\n/* script */\nimport __vue_script__ from \"!!babel-loader!../../node_modules/.npminstall/vue-loader/13.0.5/vue-loader/lib/selector?type=script&index=0!./index.vue\"\n/* template */\nimport __vue_template__ from \"!!../../node_modules/.npminstall/vue-loader/13.0.5/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-1e4f7b1a\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":\\\"src\\\",\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"}}!../../node_modules/.npminstall/vue-loader/13.0.5/vue-loader/lib/selector?type=template&index=0!./index.vue\"\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./example/src/index.vue\n// module id = 0\n// module chunks = 0","import main from './index.vue'\nexport default main\n\n\n\n// WEBPACK FOOTER //\n// ./example/src/index.js","export default function ({image, width, height, left, top, iWidth, iHeight, rotate, type, callback}) {\n  let img = new Image()\n  img.setAttribute('crossOrigin', 'anonymous')\n  let canvas = document.createElement('canvas')\n  canvas.width = width\n  canvas.height = height\n  let ctx = null\n  ctx = canvas.getContext('2d')\n  ctx.save()\n  img.onload = () => {\n    ctx.translate(left + iWidth / 2, top + iHeight / 2)\n    ctx.rotate(rotate * Math.PI / 180)\n    ctx.translate(-(left + iWidth / 2), -(top + iHeight / 2))\n    ctx.drawImage(img, left, top, iWidth, iHeight)\n    ctx.restore()\n    callback(canvas.toDataURL(type || 'image/png'))\n  }\n  img.src = image.src\n}\n\n\n\n// WEBPACK FOOTER //\n// ./example/src/makeImage.js","export default {\n  left: 0,\n  right: 0,\n  bottom: 100,\n  top: 100,\n  parent: null,\n  ratioLocked: false,\n  changeLeft (val) {\n    let _left = val > 0 ? val : 0\n    if (this.ratioLocked && this.parent) {\n      let rect = this.parent.getBoundingClientRect()\n      let thisWidth = rect.width - this.left - this.right\n      let bottom = rect.height - this.top - thisWidth\n      if (bottom < 0) {\n        bottom = 0\n        let thisHeight = rect.height - this.top\n        _left = rect.width - thisHeight - this.right\n      }\n      this.bottom = bottom\n    }\n    this.left = _left\n  },\n  changeRight (val) {\n    this.right = val\n  },\n  changeBottom (val) {\n    this.bottom = val\n  },\n  changeTop (val) {\n    this.top = val\n  },\n  setRatioLocked (val, option) {\n    this.ratioLocked = val\n    if (val) {\n      let width = this.w\n      let height = this.h\n      let ratio = width / height\n      if (option) {\n        if (option.ratio) {\n          ratio = option.ratio\n        } else if (option.w && option.h) {\n          ratio = option.w / option.h\n          width = option.w\n          height = option.h\n        }\n      }\n      this.w = width\n      this.h = width / ratio\n    }\n  },\n  setRect ({left, bottom, right, top}) {\n    if (left !== undefined && left !== null) {\n      this.left = left\n    }\n    if (bottom !== undefined && bottom !== null) {\n      this.bottom = bottom\n    }\n    if (right !== undefined && right !== null) {\n      this.right = right\n    }\n    if (top !== undefined && top !== null) {\n      this.top = top\n    }\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./example/src/marquee.js","export default function ({outerHeight, outerWidth, innerHeight, innerWidth, rotate, offsetX, offsetY}) {\n  let isVertical = (rotate === 90 || rotate === 270)\n  let oWidth = isVertical ? outerHeight : outerWidth\n  let oHeight = isVertical ? outerWidth : outerHeight\n  let innerRatio = innerWidth / innerHeight\n  let outerRatio = oWidth / oHeight\n  let iWidth = 0\n  let iHeight = 0\n  if (innerRatio > outerRatio) {\n    iWidth = oWidth\n    iHeight = iWidth / innerRatio\n  } else {\n    iHeight = oHeight\n    iWidth = iHeight * innerRatio\n  }\n  // compute position\n  let left = (outerWidth - iWidth) / 2\n  let top = (outerHeight - iHeight) / 2\n  return {height: iHeight, width: iWidth, top, left}\n}\n\n\n\n// WEBPACK FOOTER //\n// ./example/src/rotateCompute.js","<template>\n  <div class=\"vue-simple-cropper\" ref=\"cropper\">\n    <img ref=\"cropper-image\"\n        :src=\"image\"\n        alt=\"\"\n        :class=\"['vue-simple-cropper-image']\"\n        :style=\"{width: imageInfo.w + 'px',\n                 height: imageInfo.h + 'px',\n                 top: imageInfo.y + 'px',\n                 left: imageInfo.x + 'px',\n                 transform: 'rotate(' + rotate + 'deg)'}\"/>\n    <!--<div class=\"mask\"></div>-->\n    <div class=\"vue-simple-cropper-marquee\"\n         :style=\"{right: marquee.right + 'px',\n                  bottom: marquee.bottom + 'px',\n                  top: marquee.top + 'px',\n                  left: marquee.left + 'px'}\">\n      <div class=\"vue-simple-cropper-marque-wrap\">\n        <div class=\"vue-simple-cropper-marque-mask\"\n             @mousedown=\"onMarqueeMouseDown($event)\"></div>\n        <div @mousedown=\"onMarqueeDotMouseDown($event, dot)\"\n            v-for=\"dot in 8\"\n            :class=\"['vue-simple-cropper-marque-dot', 'dot' + dot]\"></div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script type=\"text/babel\">\n  import marquee from './marquee'\n  import rotateCompute from './rotateCompute'\n  import makeImage from './makeImage'\n  export default {\n    props: {\n      image: {\n        type: String,\n        default: ''\n      },\n      infoBase: {   // marquee or image or both\n        type: String,\n        default: 'marquee'\n      },\n      ratio: {    // w/h of marquee\n        type: Number,\n        default: 0\n      },\n      rotate: {\n        type: Number,\n        default: 0\n      }\n    },\n    created () {\n      this.marquee.parent = this.$refs.cropper\n    },\n    mounted () {\n      console.dir(this.$refs.cropper)\n      this.imageChanged()\n    },\n    data () {\n      return {\n        marquee,\n        imageInfo: {\n          x: 0,\n          y: 0,\n          w: 100,\n          h: 100,\n          naturalWidth: 0,\n          naturalHeight: 0\n        },\n        touchInfo: {\n          x1: 0,\n          x2: 0,\n          y1: 0,\n          y2: 0,\n          dotIndex: 0,\n          marqueeOld: {\n            left: 0,\n            right: 0,\n            bottom: 0,\n            top: 0\n          },\n          isMoving: false\n        }\n      }\n    },\n    methods: {\n      onMarqueeMouseDown (evt) {\n        console.log('down')\n        console.dir(evt)\n        this.touchInfo.x1 = evt.clientX\n        this.touchInfo.y1 = evt.clientY\n        this.touchInfo.marqueeOld.left = this.marquee.left\n        this.touchInfo.marqueeOld.bottom = this.marquee.bottom\n        this.touchInfo.marqueeOld.right = this.marquee.right\n        this.touchInfo.marqueeOld.top = this.marquee.top\n        this.touchInfo.isMoving = true\n        document.body.addEventListener('mousemove', this.onMarqueeMouseMove)\n        document.body.addEventListener('mouseup', this.onMarqueeMouseUp)\n      },\n      onMarqueeMouseMove (evt) {\n        this.touchInfo.x2 = evt.clientX\n        this.touchInfo.y2 = evt.clientY\n        let cropperRect = this.$refs.cropper.getBoundingClientRect()\n        let protoWidth = cropperRect.width - this.touchInfo.marqueeOld.left - this.touchInfo.marqueeOld.right\n        let protoHeight = cropperRect.height - this.touchInfo.marqueeOld.top - this.touchInfo.marqueeOld.bottom\n        let left = this.touchInfo.marqueeOld.left + this.touchInfo.x2 - this.touchInfo.x1\n        let right = this.touchInfo.marqueeOld.right - (this.touchInfo.x2 - this.touchInfo.x1)\n        let top = this.touchInfo.marqueeOld.top + this.touchInfo.y2 - this.touchInfo.y1\n        let bottom = this.touchInfo.marqueeOld.bottom - (this.touchInfo.y2 - this.touchInfo.y1)\n        if (left <= 0) {\n          left = 0\n          right = cropperRect.width - protoWidth\n        } else if (right <= 0) {\n          right = 0\n          left = cropperRect.width - protoWidth\n        }\n        if (top <= 0) {\n          top = 0\n          bottom = cropperRect.height - protoHeight\n        } else if (bottom <= 0) {\n          bottom = 0\n          top = cropperRect.height - protoHeight\n        }\n//        console.log(left, right, top, bottom)\n//        this.marquee.changeBottom(bottom)\n//        this.marquee.changeTop(top)\n        this.marquee.setRect({left, right, top, bottom})\n        this.computeInfo()\n      },\n      onMarqueeMouseUp (evt) {\n        this.touchInfo.isMoving = false\n        document.body.removeEventListener('mousemove', this.onMarqueeMouseMove)\n        document.body.removeEventListener('mouseup', this.onMarqueeMouseUp)\n      },\n      onMarqueeDotMouseDown (evt, idx) {\n        this.touchInfo.x1 = evt.clientX\n        this.touchInfo.y1 = evt.clientY\n        this.touchInfo.marqueeOld.left = this.marquee.left\n        this.touchInfo.marqueeOld.bottom = this.marquee.bottom\n        this.touchInfo.marqueeOld.right = this.marquee.right\n        this.touchInfo.marqueeOld.top = this.marquee.top\n        this.touchInfo.isMoving = true\n        this.touchInfo.dotIndex = idx\n        document.body.addEventListener('mousemove', this.onMarqueeDotMouseMove)\n        document.body.addEventListener('mouseup', this.onMarqueeDotMouseUp)\n      },\n      onMarqueeDotMouseMove (evt) {\n        this.touchInfo.x2 = evt.clientX\n        this.touchInfo.y2 = evt.clientY\n        let cropperRect = this.$refs.cropper.getBoundingClientRect()\n        let x = this.touchInfo.x2 - this.touchInfo.x1\n        let y = this.touchInfo.y2 - this.touchInfo.y1\n        let top = this.touchInfo.marqueeOld.top\n        let bottom = this.touchInfo.marqueeOld.bottom\n        let left = this.touchInfo.marqueeOld.left\n        let right = this.touchInfo.marqueeOld.right\n//        console.log(x, y)\n        let ratioX = (spec) => {\n          if (this.ratio) {  // w / h\n            x = y * this.ratio\n          } else if (spec) {\n            x = 0\n          }\n        }\n        let ratioY = (spec) => {\n          if (this.ratio) {\n            y = x / this.ratio\n          } else if (spec) {\n            y = 0\n          }\n        }\n        let changeTop = (arg = y) => {\n          top = this.touchInfo.marqueeOld.top + arg\n        }\n        let changeLeft = (arg = x) => {\n          left = this.touchInfo.marqueeOld.left + arg\n        }\n        let changeBottom = (arg = y) => {\n          bottom = this.touchInfo.marqueeOld.bottom + arg\n        }\n        let changeRight = (arg = x) => {\n          right = this.touchInfo.marqueeOld.right + arg\n        }\n//        let cropperRect = this.$refs.cropper.getBoundingClientRect()\n        switch (this.touchInfo.dotIndex) {\n          case 1: ratioX(); changeTop(); changeLeft(); break\n          case 2: ratioX(true); changeTop(); changeRight(); break\n          case 3: ratioX(); changeTop(); changeRight(); break\n          case 4: ratioY(true); changeLeft(); changeBottom(); break\n          case 5: ratioY(true); changeRight(-x); changeBottom(-y); break\n          case 6: ratioX(); changeBottom(-y); changeLeft(-x); break\n          case 7: ratioX(true); changeBottom(-y); changeRight(-x); break\n          case 8: ratioX(); changeRight(-x); changeBottom(-y); break\n        }\n        if (top <= 0) {\n          top = 0\n          if (this.ratio) {\n            console.log((cropperRect.height - bottom) * this.ratio)\n            if (left === this.marquee.left) {\n              right = cropperRect.width - (cropperRect.height - bottom) * this.ratio - left\n            } else {\n              left = cropperRect.width - (cropperRect.height - bottom) * this.ratio - right\n            }\n          }\n        }\n        if (bottom <= 0) {\n          bottom = 0\n          if (this.ratio) {\n            if (left === this.marquee.left) {\n              right = cropperRect.width - (cropperRect.height - top) * this.ratio - left\n            } else {\n              left = cropperRect.width - (cropperRect.height - top) * this.ratio - right\n            }\n          }\n        }\n        if (left <= 0) {\n          left = 0\n          if (this.ratio) {\n            if (top === this.marquee.top) {\n              bottom = cropperRect.height - (cropperRect.width - right) / this.ratio - top\n            } else {\n              top = cropperRect.height - (cropperRect.width - right) / this.ratio - bottom\n            }\n          }\n        }\n        if (right <= 0) {\n          right = 0\n          if (this.ratio) {\n            if (top === this.marquee.top) {\n              bottom = cropperRect.height - (cropperRect.width - left) / this.ratio - top\n            } else {\n              top = cropperRect.height - (cropperRect.width - left) / this.ratio - bottom\n            }\n          }\n        }\n        this.marquee.setRect({left, right, top, bottom})\n        this.computeInfo()\n      },\n      onMarqueeDotMouseUp (evt) {\n        this.touchInfo.isMoving = false\n        document.body.removeEventListener('mousemove', this.onMarqueeDotMouseMove)\n        document.body.removeEventListener('mouseup', this.onMarqueeDotMouseUp)\n      },\n      setImage () {\n        // get natural width and height\n        this.imageInfo.naturalWidth = this.$refs['cropper-image'].naturalWidth\n        this.imageInfo.naturalHeight = this.$refs['cropper-image'].naturalHeight\n        // set image infos\n        // set width and height\n        let outerWidth = this.$refs.cropper.clientWidth\n        let outerHeight = this.$refs.cropper.clientHeight\n        let {left, top, width, height} = rotateCompute({\n          outerHeight,\n          outerWidth,\n          innerHeight: this.imageInfo.naturalHeight,\n          innerWidth: this.imageInfo.naturalWidth,\n          rotate: this.rotate\n        })\n        this.imageInfo.y = top\n        this.imageInfo.x = left\n        this.imageInfo.w = width\n        this.imageInfo.h = height\n        // set marquee infos\n        let marqueeTop = this.imageInfo.y\n        let marqueeLeft = this.imageInfo.x\n        let marqueeBottom = outerHeight - this.imageInfo.y - this.imageInfo.h\n        let marqueeRight = outerWidth - this.imageInfo.x - this.imageInfo.w\n        let marqueeWidth = this.imageInfo.w\n        let marqueeHeight = this.imageInfo.h\n        // ratio\n        if (this.ratio) {\n          if (marqueeWidth > marqueeHeight * this.ratio) {    // ho\n            let centerX = this.imageInfo.w / 2 + this.imageInfo.x\n            let halfWidth = marqueeHeight * this.ratio / 2\n            marqueeRight = marqueeLeft = centerX - halfWidth\n            console.log(marqueeRight)\n          } else {  // v\n            let centerY = this.imageInfo.h / 2 + this.imageInfo.y\n            let halfHeight = marqueeWidth / this.ratio / 2\n            marqueeBottom = marqueeTop = centerY - halfHeight\n          }\n        }\n        this.marquee.changeLeft(marqueeLeft)\n        this.marquee.changeTop(marqueeTop)\n        this.marquee.changeBottom(marqueeBottom)\n        this.marquee.changeRight(marqueeRight)\n        this.computeInfo()\n      },\n      imageChanged () {\n        this.$refs['cropper-image'].onload = () => {\n          this.setImage()\n        }\n      },\n      computeInfo () {\n        let cropperRect = this.$refs.cropper.getBoundingClientRect()\n        // TODO: scale\n        let result = {}\n        let computeImage = () => {\n          return {  // rotate field is rotate of marquee\n            x: this.marquee.left - this.imageInfo.x,\n            y: this.marquee.top - this.imageInfo.y,\n            w: cropperRect.width - this.marquee.left - this.marquee.right,\n            h: cropperRect.height - this.marquee.top - this.marquee.bottom,\n            rotate: `${this.rotate}deg`,\n            src: this.image\n          }\n        }\n        let computeMarquee = () => {\n          return {  // x is position x of image, w is width of marquee, rotate is rotate of image(origin: center)\n            x: this.imageInfo.x - this.marquee.left,\n            y: this.imageInfo.y - this.marquee.top,\n            w: cropperRect.width - this.marquee.left - this.marquee.right,\n            h: cropperRect.height - this.marquee.top - this.marquee.bottom,\n            rotate: `${this.rotate}deg`,\n            src: this.image,\n            image: {\n              w: this.imageInfo.w,\n              h: this.imageInfo.h,\n              // TODO: 支持rotate\n              rotate: '0deg'\n            }\n          }\n        }\n        if (this.infoBase === 'image') {\n          result = computeImage()\n        } else if (this.infoBase === 'marquee') {\n          result = computeMarquee()\n        } else if (this.infoBase === 'both') {\n          result = {\n            image: computeImage(),\n            marquee: computeMarquee()\n          }\n        }\n        this.$emit('changed', result)\n      },\n      getImage (callback, type = 'image/png') {\n        let cropperRect = this.$refs.cropper.getBoundingClientRect()\n        return makeImage({\n          callback,\n          rotate: this.rotate,\n          type,\n          width: cropperRect.width - this.marquee.left - this.marquee.right,\n          height: cropperRect.height - this.marquee.top - this.marquee.bottom,\n          left: this.imageInfo.x - this.marquee.left,\n          top: this.imageInfo.y - this.marquee.top,\n          iWidth: this.imageInfo.w,\n          iHeight: this.imageInfo.h,\n          image: this.$refs['cropper-image']\n        })\n      }\n    },\n    watch: {\n      image (val) {\n        this.imageChanged()\n      },\n      rotate () {\n        this.setImage()\n      }\n    }\n  }\n</script>\n\n<style>\n  .vue-simple-cropper {\n    position: relative;\n    background-color: #f2f2f2;\n    margin: 0 auto;\n    width: 800px;\n    height: 300px;\n    overflow: hidden;\n  }\n  .vue-simple-cropper * {\n    -webkit-touch-callout: none;\n    -webkit-user-select: none;\n    -khtml-user-select: none;\n    -moz-user-select: none;\n    -ms-user-select: none;\n    user-select: none;\n  }\n  .vue-simple-cropper .vue-simple-cropper-image {\n    position: absolute;\n  }\n  .vue-simple-cropper .vue-simple-cropper-marquee {\n    position: absolute;\n    box-shadow: rgba(0, 0, 0, 0.2) 0 0 0 20000px;\n    cursor: move;\n    outline: #1fa3ff solid 1px;\n  }\n  .vue-simple-cropper .vue-simple-cropper-marquee .vue-simple-cropper-marque-wrap {\n    width: 100%;\n    height: 100%;\n    position: relative;\n  }\n  .vue-simple-cropper .vue-simple-cropper-marquee .vue-simple-cropper-marque-wrap .vue-simple-cropper-marque-dot {\n    position: absolute;\n    width: 6px;\n    height: 6px;\n    background-color: #1fa3ff;\n  }\n  .vue-simple-cropper-marque-mask {\n    width: 100%;\n    height: 100%;\n  }\n  .vue-simple-cropper-marque-dot.dot1 {\n    top: -3px;\n    left: -3px;\n    cursor: nw-resize;\n  }\n  .vue-simple-cropper-marque-dot.dot2 {\n    top: -3px;\n    left: 50%;\n    margin-left: -3px;\n    cursor: n-resize;\n  }\n  .vue-simple-cropper-marque-dot.dot3 {\n    top: -3px;\n    right: -3px;\n    cursor: ne-resize;\n  }\n  .vue-simple-cropper-marque-dot.dot4 {\n    top: 50%;\n    left: -3px;\n    margin-top: -3px;\n    cursor: w-resize;\n  }\n  .vue-simple-cropper-marque-dot.dot5 {\n    top: 50%;\n    right: -3px;\n    margin-top: -3px;\n    cursor: e-resize;\n  }\n  .vue-simple-cropper-marque-dot.dot6 {\n    bottom: -3px;\n    left: -3px;\n    cursor: sw-resize;\n  }\n  .vue-simple-cropper-marque-dot.dot7 {\n    bottom: -3px;\n    left: 50%;\n    margin-left: -3px;\n    cursor: s-resize;\n  }\n  .vue-simple-cropper-marque-dot.dot8 {\n    bottom: -3px;\n    right: -3px;\n    cursor: se-resize;\n  }\n</style>\n\n\n\n// WEBPACK FOOTER //\n// index.vue?4b12a871","/* globals __VUE_SSR_CONTEXT__ */\n\n// this module is a runtime utility for cleaner component module output and will\n// be included in the final webpack user bundle\n\nmodule.exports = function normalizeComponent (\n  rawScriptExports,\n  compiledTemplate,\n  injectStyles,\n  scopeId,\n  moduleIdentifier /* server only */\n) {\n  var esModule\n  var scriptExports = rawScriptExports = rawScriptExports || {}\n\n  // ES6 modules interop\n  var type = typeof rawScriptExports.default\n  if (type === 'object' || type === 'function') {\n    esModule = rawScriptExports\n    scriptExports = rawScriptExports.default\n  }\n\n  // Vue.extend constructor export interop\n  var options = typeof scriptExports === 'function'\n    ? scriptExports.options\n    : scriptExports\n\n  // render functions\n  if (compiledTemplate) {\n    options.render = compiledTemplate.render\n    options.staticRenderFns = compiledTemplate.staticRenderFns\n  }\n\n  // scopedId\n  if (scopeId) {\n    options._scopeId = scopeId\n  }\n\n  var hook\n  if (moduleIdentifier) { // server build\n    hook = function (context) {\n      // 2.3 injection\n      context =\n        context || // cached call\n        (this.$vnode && this.$vnode.ssrContext) || // stateful\n        (this.parent && this.parent.$vnode && this.parent.$vnode.ssrContext) // functional\n      // 2.2 with runInNewContext: true\n      if (!context && typeof __VUE_SSR_CONTEXT__ !== 'undefined') {\n        context = __VUE_SSR_CONTEXT__\n      }\n      // inject component styles\n      if (injectStyles) {\n        injectStyles.call(this, context)\n      }\n      // register component module identifier for async chunk inferrence\n      if (context && context._registeredComponents) {\n        context._registeredComponents.add(moduleIdentifier)\n      }\n    }\n    // used by ssr in case component is cached and beforeCreate\n    // never gets called\n    options._ssrRegister = hook\n  } else if (injectStyles) {\n    hook = injectStyles\n  }\n\n  if (hook) {\n    var functional = options.functional\n    var existing = functional\n      ? options.render\n      : options.beforeCreate\n    if (!functional) {\n      // inject component registration as beforeCreate hook\n      options.beforeCreate = existing\n        ? [].concat(existing, hook)\n        : [hook]\n    } else {\n      // register for functioal component in vue file\n      options.render = function renderWithStyleInjection (h, context) {\n        hook.call(context)\n        return existing(h, context)\n      }\n    }\n  }\n\n  return {\n    esModule: esModule,\n    exports: scriptExports,\n    options: options\n  }\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/.npminstall/vue-loader/13.0.5/vue-loader/lib/component-normalizer.js\n// module id = 7\n// module chunks = 0","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{ref:\"cropper\",staticClass:\"vue-simple-cropper\"},[_c('img',{ref:\"cropper-image\",class:['vue-simple-cropper-image'],style:({width: _vm.imageInfo.w + 'px',\n               height: _vm.imageInfo.h + 'px',\n               top: _vm.imageInfo.y + 'px',\n               left: _vm.imageInfo.x + 'px',\n               transform: 'rotate(' + _vm.rotate + 'deg)'}),attrs:{\"src\":_vm.image,\"alt\":\"\"}}),_vm._v(\" \"),_c('div',{staticClass:\"vue-simple-cropper-marquee\",style:({right: _vm.marquee.right + 'px',\n                bottom: _vm.marquee.bottom + 'px',\n                top: _vm.marquee.top + 'px',\n                left: _vm.marquee.left + 'px'})},[_c('div',{staticClass:\"vue-simple-cropper-marque-wrap\"},[_c('div',{staticClass:\"vue-simple-cropper-marque-mask\",on:{\"mousedown\":function($event){_vm.onMarqueeMouseDown($event)}}}),_vm._v(\" \"),_vm._l((8),function(dot){return _c('div',{class:['vue-simple-cropper-marque-dot', 'dot' + dot],on:{\"mousedown\":function($event){_vm.onMarqueeDotMouseDown($event, dot)}}})})],2)])])}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/.npminstall/vue-loader/13.0.5/vue-loader/lib/template-compiler?{\"id\":\"data-v-1e4f7b1a\",\"hasScoped\":false,\"transformToRequire\":{\"video\":\"src\",\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"}}!./~/.npminstall/vue-loader/13.0.5/vue-loader/lib/selector.js?type=template&index=0!./example/src/index.vue\n// module id = 8\n// module chunks = 0"],"sourceRoot":""}